import matplotlib.pyplot as plt
import matplotlib.image as image
import matplotlib.patches as patches
import mplcursors
import numpy as np
from random import random

img = image.imread('/home/laptopmindee/Téléchargements/mock_image.jpg')
print(img.shape)

boxes = [[[539, 971], [539, 979], [605, 979], [605, 971]],
[[492, 970], [492, 980], [534, 980], [534, 970]],
[[844, 968], [844, 981], [882, 981], [882, 968]],
[[761, 969], [761, 979], [845, 979], [845, 969]],
[[725, 968], [725, 982], [760, 982], [760, 968]],
[[696, 968], [696, 982], [727, 982], [727, 968]],
[[676, 969], [676, 981], [697, 981], [697, 969]],
[[626, 969], [626, 980], [675, 980], [675, 969]],
[[604, 968], [604, 982], [627, 982], [627, 968]],
[[467, 969], [467, 981], [491, 981], [491, 969]],
[[425, 969], [425, 980], [466, 980], [466, 969]],
[[381, 969], [381, 980], [430, 980], [430, 969]],
[[345, 969], [345, 980], [380, 980], [380, 969]],
[[312, 969], [312, 980], [345, 980], [345, 969]],
[[218, 969], [218, 980], [312, 980], [312, 969]],
[[142, 968], [142, 981], [217, 981], [217, 968]],
[[317, 874], [317, 888], [408, 888], [408, 874]],
[[82, 874], [82, 889], [161, 889], [161, 874]],
[[273, 872], [273, 889], [314, 889], [314, 872]],
[[29, 872], [29, 889], [79, 889], [79, 872]],
[[542, 870], [542, 884], [603, 884], [603, 870]],
[[632, 870], [632, 884], [644, 884], [644, 870]],
[[605, 867], [605, 886], [634, 886], [634, 867]],
[[80, 859], [80, 877], [159, 877], [159, 859]],
[[29, 858], [29, 875], [79, 875], [79, 858]],
[[638, 845], [638, 862], [698, 862], [698, 845]],
[[584, 845], [584, 862], [636, 862], [636, 845]],
[[541, 844], [541, 861], [583, 861], [583, 844]],
[[85, 832], [85, 849], [134, 849], [134, 832]],
[[329, 831], [329, 848], [413, 848], [413, 831]],
[[274, 832], [274, 846], [327, 846], [327, 832]],
[[31, 832], [31, 846], [85, 846], [85, 832]],
[[616, 826], [616, 839], [688, 839], [688, 826]],
[[581, 823], [581, 840], [615, 840], [615, 823]],
[[536, 823], [536, 840], [581, 840], [581, 823]],
[[330, 818], [330, 832], [374, 832], [374, 818]],
[[87, 818], [87, 832], [143, 832], [143, 818]],
[[274, 816], [274, 833], [328, 833], [328, 816]],
[[30, 816], [30, 834], [86, 834], [86, 816]],
[[889, 809], [889, 826], [957, 826], [957, 809]],
[[819, 809], [819, 826], [863, 826], [863, 809]],
[[863, 807], [863, 827], [887, 827], [887, 807]],
[[584, 805], [584, 819], [696, 819], [696, 805]],
[[536, 803], [536, 820], [581, 820], [581, 803]],
[[329, 803], [329, 820], [380, 820], [380, 803]],
[[273, 803], [273, 820], [328, 820], [328, 803]],
[[92, 805], [92, 819], [151, 819], [151, 805]],
[[29, 804], [29, 821], [88, 821], [88, 804]],
[[646, 774], [646, 785], [696, 785], [696, 774]],
[[44, 773], [44, 786], [136, 786], [136, 773]],
[[657, 761], [657, 775], [698, 775], [698, 761]],
[[208, 761], [208, 774], [248, 774], [248, 761]],
[[187, 762], [187, 773], [209, 773], [209, 762]],
[[93, 762], [93, 773], [191, 773], [191, 762]],
[[44, 760], [44, 775], [88, 775], [88, 760]],
[[896, 750], [896, 760], [945, 760], [945, 750]],
[[564, 748], [564, 762], [610, 762], [610, 748]],
[[85, 750], [85, 760], [172, 760], [172, 750]],
[[44, 748], [44, 762], [85, 762], [85, 748]],
[[912, 736], [912, 750], [946, 750], [946, 736]],
[[769, 737], [769, 748], [814, 748], [814, 737]],
[[366, 738], [366, 748], [409, 748], [409, 738]],
[[98, 736], [98, 749], [144, 749], [144, 736]],
[[46, 737], [46, 748], [98, 748], [98, 737]],
[[566, 724], [566, 737], [609, 737], [609, 724]],
[[478, 725], [478, 736], [522, 736], [522, 725]],
[[360, 725], [360, 736], [408, 736], [408, 725]],
[[46, 726], [46, 736], [142, 736], [142, 726]],
[[360, 714], [360, 724], [409, 724], [409, 714]],
[[770, 713], [770, 724], [814, 724], [814, 713]],
[[182, 713], [182, 723], [257, 723], [257, 713]],
[[114, 714], [114, 722], [179, 722], [179, 714]],
[[45, 713], [45, 724], [112, 724], [112, 713]],
[[908, 711], [908, 725], [947, 725], [947, 711]],
[[772, 701], [772, 712], [814, 712], [814, 701]],
[[360, 701], [360, 712], [408, 712], [408, 701]],
[[908, 699], [908, 713], [947, 713], [947, 699]],
[[159, 701], [159, 710], [240, 710], [240, 701]],
[[770, 689], [770, 699], [814, 699], [814, 689]],
[[164, 690], [164, 698], [253, 698], [253, 690]],
[[90, 690], [90, 698], [158, 698], [158, 690]],
[[45, 689], [45, 699], [94, 699], [94, 689]],
[[912, 687], [912, 701], [947, 701], [947, 687]],
[[359, 688], [359, 699], [409, 699], [409, 688]],
[[769, 676], [769, 687], [814, 687], [814, 676]],
[[360, 677], [360, 685], [408, 685], [408, 677]],
[[79, 676], [79, 687], [170, 687], [170, 676]],
[[45, 676], [45, 687], [76, 687], [76, 676]],
[[909, 675], [909, 689], [947, 689], [947, 675]],
[[912, 663], [912, 677], [947, 677], [947, 663]],
[[770, 664], [770, 675], [814, 675], [814, 664]],
[[359, 664], [359, 675], [409, 675], [409, 664]],
[[81, 665], [81, 673], [142, 673], [142, 665]],
[[45, 664], [45, 675], [76, 675], [76, 664]],
[[770, 653], [770, 663], [814, 663], [814, 653]],
[[359, 652], [359, 663], [409, 663], [409, 652]],
[[45, 652], [45, 662], [96, 662], [96, 652]],
[[912, 650], [912, 666], [946, 666], [946, 650]],
[[771, 639], [771, 652], [814, 652], [814, 639]],
[[478, 640], [478, 651], [522, 651], [522, 640]],
[[363, 640], [363, 651], [409, 651], [409, 640]],
[[102, 641], [102, 649], [122, 649], [122, 641]],
[[120, 639], [120, 651], [152, 651], [152, 639]],
[[773, 628], [773, 638], [814, 638], [814, 628]],
[[478, 628], [478, 638], [522, 638], [522, 628]],
[[217, 629], [217, 638], [227, 638], [227, 629]],
[[110, 630], [110, 636], [117, 636], [117, 630]],
[[45, 628], [45, 639], [102, 639], [102, 628]],
[[907, 625], [907, 642], [948, 642], [948, 625]],
[[571, 626], [571, 641], [611, 641], [611, 626]],
[[360, 627], [360, 638], [409, 638], [409, 627]],
[[196, 626], [196, 640], [217, 640], [217, 626]],
[[155, 627], [155, 638], [194, 638], [194, 627]],
[[119, 626], [119, 640], [153, 640], [153, 626]],
[[771, 614], [771, 627], [814, 627], [814, 614]],
[[577, 614], [577, 629], [611, 629], [611, 614]],
[[477, 614], [477, 627], [522, 627], [522, 614]],
[[359, 614], [359, 627], [410, 627], [410, 614]],
[[912, 612], [912, 629], [948, 629], [948, 612]],
[[42, 613], [42, 627], [71, 627], [71, 613]],
[[770, 603], [770, 614], [814, 614], [814, 603]],
[[478, 603], [478, 614], [521, 614], [521, 603]],
[[364, 603], [364, 614], [410, 614], [410, 603]],
[[912, 601], [912, 616], [946, 616], [946, 601]],
[[577, 601], [577, 616], [612, 616], [612, 601]],
[[78, 601], [78, 615], [112, 615], [112, 601]],
[[45, 602], [45, 614], [78, 614], [78, 602]],
[[769, 592], [769, 602], [813, 602], [813, 592]],
[[478, 592], [478, 602], [521, 602], [521, 592]],
[[360, 591], [360, 602], [410, 602], [410, 591]],
[[79, 590], [79, 603], [113, 603], [113, 590]],
[[45, 591], [45, 602], [77, 602], [77, 591]],
[[912, 588], [912, 605], [948, 605], [948, 588]],
[[577, 589], [577, 604], [611, 604], [611, 589]],
[[766, 579], [766, 590], [814, 590], [814, 579]],
[[478, 578], [478, 591], [522, 591], [522, 578]],
[[363, 578], [363, 591], [409, 591], [409, 578]],
[[159, 579], [159, 589], [199, 589], [199, 579]],
[[906, 577], [906, 592], [947, 592], [947, 577]],
[[571, 576], [571, 593], [612, 593], [612, 576]],
[[216, 577], [216, 591], [251, 591], [251, 577]],
[[120, 578], [120, 589], [160, 589], [160, 578]],
[[80, 578], [80, 590], [118, 590], [118, 578]],
[[42, 577], [42, 591], [77, 591], [77, 577]],
[[904, 566], [904, 579], [945, 579], [945, 566]],
[[768, 566], [768, 579], [815, 579], [815, 566]],
[[478, 566], [478, 579], [523, 579], [523, 566]],
[[572, 565], [572, 580], [611, 580], [611, 565]],
[[358, 565], [358, 579], [409, 579], [409, 565]],
[[161, 566], [161, 577], [202, 577], [202, 566]],
[[122, 566], [122, 577], [158, 577], [158, 566]],
[[78, 565], [78, 578], [118, 578], [118, 565]],
[[43, 565], [43, 579], [80, 579], [80, 565]],
[[203, 564], [203, 578], [236, 578], [236, 564]],
[[764, 554], [764, 567], [815, 567], [815, 554]],
[[478, 554], [478, 567], [522, 567], [522, 554]],
[[906, 553], [906, 567], [946, 567], [946, 553]],
[[570, 552], [570, 570], [612, 570], [612, 552]],
[[107, 554], [107, 565], [157, 565], [157, 554]],
[[45, 554], [45, 565], [104, 565], [104, 554]],
[[371, 552], [371, 566], [410, 566], [410, 552]],
[[913, 541], [913, 555], [947, 555], [947, 541]],
[[769, 541], [769, 554], [814, 554], [814, 541]],
[[364, 542], [364, 553], [409, 553], [409, 542]],
[[120, 542], [120, 552], [159, 552], [159, 542]],
[[46, 543], [46, 551], [114, 551], [114, 543]],
[[162, 541], [162, 553], [180, 553], [180, 541]],
[[770, 529], [770, 542], [815, 542], [815, 529]],
[[360, 530], [360, 541], [409, 541], [409, 530]],
[[120, 530], [120, 541], [158, 541], [158, 530]],
[[46, 531], [46, 539], [116, 539], [116, 531]],
[[906, 527], [906, 544], [948, 544], [948, 527]],
[[162, 529], [162, 541], [180, 541], [180, 529]],
[[768, 517], [768, 530], [814, 530], [814, 517]],
[[360, 518], [360, 529], [410, 529], [410, 518]],
[[170, 518], [170, 528], [205, 528], [205, 518]],
[[108, 519], [108, 527], [163, 527], [163, 519]],
[[85, 518], [85, 529], [106, 529], [106, 518]],
[[911, 516], [911, 531], [947, 531], [947, 516]],
[[45, 517], [45, 528], [85, 528], [85, 517]],
[[771, 506], [771, 517], [814, 517], [814, 506]],
[[477, 506], [477, 517], [521, 517], [521, 506]],
[[362, 505], [362, 518], [410, 518], [410, 505]],
[[114, 506], [114, 516], [166, 516], [166, 506]],
[[46, 507], [46, 515], [108, 515], [108, 507]],
[[908, 504], [908, 519], [947, 519], [947, 504]],
[[576, 504], [576, 518], [611, 518], [611, 504]],
[[169, 505], [169, 517], [201, 517], [201, 505]],
[[771, 494], [771, 505], [814, 505], [814, 494]],
[[477, 493], [477, 506], [521, 506], [521, 493]],
[[359, 494], [359, 505], [410, 505], [410, 494]],
[[902, 492], [902, 506], [946, 506], [946, 492]],
[[571, 492], [571, 506], [610, 506], [610, 492]],
[[187, 493], [187, 504], [201, 504], [201, 493]],
[[169, 493], [169, 504], [189, 504], [189, 493]],
[[114, 493], [114, 504], [166, 504], [166, 493]],
[[45, 493], [45, 504], [110, 504], [110, 493]],
[[770, 481], [770, 492], [813, 492], [813, 481]],
[[129, 481], [129, 491], [177, 491], [177, 481]],
[[47, 482], [47, 490], [123, 490], [123, 482]],
[[359, 480], [359, 491], [410, 491], [410, 480]],
[[911, 478], [911, 493], [946, 493], [946, 478]],
[[772, 469], [772, 479], [813, 479], [813, 469]],
[[478, 469], [478, 480], [521, 480], [521, 469]],
[[204, 469], [204, 479], [246, 479], [246, 469]],
[[129, 469], [129, 479], [199, 479], [199, 469]],
[[89, 469], [89, 479], [119, 479], [119, 469]],
[[905, 467], [905, 481], [946, 481], [946, 467]],
[[570, 467], [570, 481], [610, 481], [610, 467]],
[[359, 468], [359, 479], [410, 479], [410, 468]],
[[47, 468], [47, 479], [91, 479], [91, 468]],
[[901, 457], [901, 467], [945, 467], [945, 457]],
[[564, 456], [564, 469], [609, 469], [609, 456]],
[[477, 457], [477, 468], [521, 468], [521, 457]],
[[131, 459], [131, 465], [197, 465], [197, 459]],
[[45, 457], [45, 467], [91, 467], [91, 457]],
[[770, 456], [770, 467], [814, 467], [814, 456]],
[[359, 456], [359, 468], [410, 468], [410, 456]],
[[202, 456], [202, 467], [233, 467], [233, 456]],
[[89, 456], [89, 467], [122, 467], [122, 456]],
[[772, 445], [772, 455], [814, 455], [814, 445]],
[[360, 445], [360, 456], [409, 456], [409, 445]],
[[65, 446], [65, 454], [136, 454], [136, 446]],
[[904, 443], [904, 457], [946, 457], [946, 443]],
[[44, 444], [44, 456], [66, 456], [66, 444]],
[[360, 433], [360, 444], [409, 444], [409, 433]],
[[904, 431], [904, 444], [945, 444], [945, 431]],
[[770, 431], [770, 444], [814, 444], [814, 431]],
[[98, 432], [98, 443], [143, 443], [143, 432]],
[[66, 432], [66, 443], [100, 443], [100, 432]],
[[44, 430], [44, 445], [66, 445], [66, 430]],
[[361, 419], [361, 432], [409, 432], [409, 419]],
[[177, 420], [177, 430], [226, 430], [226, 420]],
[[93, 421], [93, 429], [152, 429], [152, 421]],
[[906, 418], [906, 432], [946, 432], [946, 418]],
[[772, 419], [772, 431], [814, 431], [814, 419]],
[[152, 418], [152, 432], [178, 432], [178, 418]],
[[45, 419], [45, 430], [91, 430], [91, 419]],
[[180, 409], [180, 417], [246, 417], [246, 409]],
[[108, 409], [108, 418], [177, 418], [177, 409]],
[[45, 408], [45, 418], [105, 418], [105, 408]],
[[908, 406], [908, 420], [946, 420], [946, 406]],
[[770, 406], [770, 419], [814, 419], [814, 406]],
[[360, 406], [360, 420], [410, 420], [410, 406]],
[[204, 396], [204, 406], [243, 406], [243, 396]],
[[147, 397], [147, 405], [198, 405], [198, 397]],
[[92, 396], [92, 406], [144, 406], [144, 396]],
[[901, 395], [901, 406], [944, 406], [944, 395]],
[[765, 395], [765, 406], [814, 406], [814, 395]],
[[570, 394], [570, 408], [611, 408], [611, 394]],
[[476, 394], [476, 407], [522, 407], [522, 394]],
[[359, 395], [359, 406], [410, 406], [410, 395]],
[[48, 395], [48, 406], [89, 406], [89, 395]],
[[45, 373], [45, 383], [94, 383], [94, 373]],
[[647, 372], [647, 383], [698, 383], [698, 372]],
[[99, 372], [99, 383], [131, 383], [131, 372]],
[[45, 306], [45, 316], [96, 316], [96, 306]],
[[646, 305], [646, 316], [697, 316], [697, 305]],
[[470, 304], [470, 317], [521, 317], [521, 304]],
[[367, 304], [367, 317], [410, 317], [410, 304]],
[[120, 305], [120, 316], [150, 316], [150, 305]],
[[98, 304], [98, 318], [120, 318], [120, 304]],
[[875, 276], [875, 292], [958, 292], [958, 276]],
[[762, 276], [762, 293], [828, 293], [828, 276]],
[[562, 277], [562, 291], [630, 291], [630, 277]],
[[430, 277], [430, 291], [472, 291], [472, 277]],
[[134, 277], [134, 291], [212, 291], [212, 277]],
[[833, 275], [833, 292], [870, 292], [870, 275]],
[[716, 275], [716, 292], [761, 292], [761, 275]],
[[634, 277], [634, 291], [690, 291], [690, 277]],
[[474, 276], [474, 292], [533, 292], [533, 276]],
[[347, 276], [347, 291], [388, 291], [388, 276]],
[[330, 249], [330, 260], [455, 260], [455, 249]],
[[270, 250], [270, 258], [330, 258], [330, 250]],
[[31, 246], [31, 260], [72, 260], [72, 246]],
[[358, 231], [358, 242], [418, 242], [418, 231]],
[[187, 230], [187, 243], [249, 243], [249, 230]],
[[32, 231], [32, 242], [85, 242], [85, 231]],
[[263, 228], [263, 245], [291, 245], [291, 228]],
[[563, 219], [563, 227], [660, 227], [660, 219]],
[[324, 212], [324, 226], [353, 226], [353, 212]],
[[275, 213], [275, 224], [321, 224], [321, 213]],
[[85, 213], [85, 224], [123, 224], [123, 213]],
[[31, 212], [31, 226], [73, 226], [73, 212]],
[[96, 197], [96, 207], [137, 207], [137, 197]],
[[138, 195], [138, 208], [195, 208], [195, 195]],
[[32, 196], [32, 208], [84, 208], [84, 196]],
[[592, 191], [592, 205], [653, 205], [653, 191]],
[[534, 191], [534, 204], [584, 204], [584, 191]],
[[33, 181], [33, 189], [114, 189], [114, 181]],
[[127, 180], [127, 188], [202, 188], [202, 180]],
[[127, 163], [127, 171], [201, 171], [201, 163]],
[[82, 162], [82, 173], [108, 173], [108, 162]],
[[32, 162], [32, 172], [81, 172], [81, 162]],
[[636, 157], [636, 171], [664, 171], [664, 157]],
[[558, 157], [558, 171], [635, 171], [635, 157]],
[[531, 156], [531, 170], [557, 170], [557, 156]],
[[32, 146], [32, 154], [91, 154], [91, 146]],
[[632, 141], [632, 151], [681, 151], [681, 141]],
[[563, 140], [563, 151], [627, 151], [627, 140]],
[[531, 139], [531, 153], [561, 153], [561, 139]],
[[161, 129], [161, 137], [170, 137], [170, 129]],
[[31, 128], [31, 138], [101, 138], [101, 128]],
[[653, 104], [653, 115], [738, 115], [738, 104]],
[[578, 105], [578, 113], [637, 113], [637, 105]],
[[350, 105], [350, 113], [402, 113], [402, 105]],
[[399, 103], [399, 115], [414, 115], [414, 103]],
[[296, 105], [296, 113], [351, 113], [351, 105]],
[[31, 102], [31, 115], [80, 115], [80, 102]],
[[287, 89], [287, 99], [336, 99], [336, 89]],
[[253, 89], [253, 100], [286, 100], [286, 89]],
[[216, 89], [216, 100], [251, 100], [251, 89]],
[[31, 89], [31, 100], [66, 100], [66, 89]],
[[637, 88], [637, 96], [727, 96], [727, 88]],
[[578, 88], [578, 96], [635, 96], [635, 88]],
[[91, 73], [91, 81], [144, 81], [144, 73]],
[[31, 72], [31, 82], [77, 82], [77, 72]],
[[786, 69], [786, 80], [866, 80], [866, 69]],
[[736, 68], [736, 82], [770, 82], [770, 68]],
[[612, 69], [612, 80], [691, 80], [691, 69]],
[[576, 69], [576, 80], [607, 80], [607, 69]],
[[640, 52], [640, 63], [687, 63], [687, 52]],
[[576, 52], [576, 63], [627, 63], [627, 52]],
[[690, 50], [690, 64], [727, 64], [727, 50]],
[[110, 43], [110, 57], [208, 57], [208, 43]],
[[66, 44], [66, 55], [109, 55], [109, 44]],
[[30, 43], [30, 57], [66, 57], [66, 43]],
[[82, 22], [82, 33], [182, 33], [182, 22]],
[[794, 17], [794, 38], [936, 38], [936, 17]],
[[570, 20], [570, 35], [724, 35], [724, 20]],
[[31, 18], [31, 36], [76, 36], [76, 18]],
[[735, 15], [735, 39], [785, 39], [785, 15]]]

# Create figure and axes
fig, ax = plt.subplots(1, figsize=(100, 100))
# Display the image
ax.imshow(img)
ax.set_title("invoice")
ax.get_xaxis().set_visible(False)
ax.get_yaxis().set_visible(False)  
artists = []

blocks=[[[0.01, 0.42], [0.01, 1.1], [0.7, 1.1], [0.7, 0.42]],
[[0.01, 0.01], [0.01, 0.17], [0.35, 0.17], [0.35, 0.01]],
[[0.4, 0.01], [0.4, 0.17], [0.65, 0.17], [0.65, 0.01]]]
# Plot blocks
for i, box in enumerate(blocks):
    rect = patches.Rectangle((int(box[0][0]*842), int(box[0][1]*596)), int(box[2][0]*842 - box[0][0]*842), int(box[1][1]*596 - box[0][1]*596), fill=True, linewidth=2, edgecolor=(0,1,0,0.1), facecolor=(0,1,0,0.3), label="block_"+str(i))
    ax.add_patch(rect)
    artists.append(rect)


# Plot words
for i, box in enumerate(boxes):
    rect = patches.Rectangle((int(box[0][0]*842/1445), int(box[0][1]*596/725)), int(box[2][0]*(842/1445) - box[0][0]*(842/1445)), int(box[1][1]*(596/725) - box[0][1]*(596/725)), fill=True, linewidth=2, edgecolor='r', facecolor=(1,0,0,0.3), label="word_"+str(i)+", confidence: "+str(random()))
    ax.add_patch(rect)
    artists.append(rect)



mplcursors.Cursor(artists, hover=2).connect(
    "add", lambda sel: sel.annotation.set_text(sel.artist.get_label()))
plt.show()